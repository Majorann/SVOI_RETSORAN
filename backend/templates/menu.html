{% extends "base.html" %}
{% block body_class %}page-menu{% endblock %}
{% block content %}
<div class="menu-shell">
<header class="top menu-top">
  <div class="brand">
    <div class="brand__mark">–°</div>
    <div>
      <p class="brand__name">–ú–µ–Ω—é</p>
      <p class="brand__tag">–í—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–∞</p>
    </div>
  </div>
  <div class="menu-top__actions">
    <a class="icon-button" href="{{ url_for('index') }}" aria-label="–ù–∞–∑–∞–¥">‚Üê</a>
  </div>
</header>

<section class="section">
  <div class="menu-controls">
    <div class="menu-categories" id="menuCategoryChips" role="tablist" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏">
      <button class="menu-chip is-active" type="button" data-type="all">–í—Å–µ</button>
      <button class="menu-chip" type="button" data-type="–ó–∞–∫—É—Å–∫–∏">–ó–∞–∫—É—Å–∫–∏</button>
      <button class="menu-chip" type="button" data-type="–°–∞–ª–∞—Ç—ã">–°–∞–ª–∞—Ç—ã</button>
      <button class="menu-chip" type="button" data-type="–°—É–ø—ã">–°—É–ø—ã</button>
      <button class="menu-chip" type="button" data-type="–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞">–ì–æ—Ä—è—á–∏–µ</button>
      <button class="menu-chip" type="button" data-type="–î–µ—Å–µ—Ä—Ç—ã">–î–µ—Å–µ—Ä—Ç—ã</button>
      <button class="menu-chip" type="button" data-type="–ù–∞–ø–∏—Ç–∫–∏">–ù–∞–ø–∏—Ç–∫–∏</button>
      <button class="menu-chip" type="button" data-type="–ê–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏">–ê–ª–∫–æ–≥–æ–ª—å</button>
    </div>
    <div class="sort-control">
      <button class="sort-toggle" id="sortToggle" type="button" aria-haspopup="listbox" aria-expanded="false">
        –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
        <span class="sort-toggle__value" id="sortValue">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</span>
        <span class="sort-toggle__arrow">‚ñæ</span>
      </button>
      <div class="sort-menu" id="sortMenu" role="listbox" aria-hidden="true">
        <button class="sort-option is-active" type="button" data-sort="popular">
          <span>–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</span>
          <span class="sort-option__check">‚úì</span>
        </button>
        <button class="sort-option" type="button" data-sort="price-asc">
          <span>–¶–µ–Ω–∞ ‚Üë</span>
          <span class="sort-option__check">‚úì</span>
        </button>
        <button class="sort-option" type="button" data-sort="price-desc">
          <span>–¶–µ–Ω–∞ ‚Üì</span>
          <span class="sort-option__check">‚úì</span>
        </button>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="menu">
    {% for item in items %}
      <article class="menu-card menu-card--menu" data-type="{{ item.type }}" data-price="{{ item.price }}" data-popularity="{{ item.popularity or item.orders_count or 0 }}" style="--dish-photo: url('{{ url_for('static', filename=item.photo) }}');">
        <div class="menu-card__media" style="background-image: var(--dish-photo);">
        </div>
        <div class="menu-card__content">
          <div class="menu-card__text">
            <div class="menu-card__title-row">
              <h3>{{ item.name }}</h3>
              <span class="menu-type menu-type--{{ item.type|replace(' ', '-')|lower }}">{{ item.type }}</span>
            </div>
            <p class="menu-card__lore">{{ item.lore }}</p>
            <div class="menu-card__bottom">
              <span class="price">{{ item.price }} ‚ÇΩ</span>
              <button class="add-button" type="button" data-id="{{ item.id }}" data-name="{{ item.name }}" data-price="{{ item.price }}" data-photo="{{ item.photo }}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
            </div>
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
</section>
</div>

<div class="cart-drawer" id="cartDrawer" aria-hidden="true" hidden>
  <div class="cart-drawer__header">
    <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
  </div>
  <div class="cart-drawer__list" id="cartList"></div>
  <div class="cart-drawer__footer">
    <div class="cart-drawer__total">–ò—Ç–æ–≥–æ: <span id="cartTotal">0</span> ‚ÇΩ</div>
    <button class="primary-action" id="cartCheckout" type="button">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
  </div>
</div>

<nav class="bottom-nav">
  <a class="bottom-nav__item" href="{{ url_for('notifications') }}">
    <span>üîî</span>
    <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
    {% if notifications_count %}
      <span class="nav-badge">{{ notifications_count }}</span>
    {% endif %}
  </a>
  <a class="bottom-nav__item" href="{{ url_for('index') }}">
    <span>üè†</span>
    <span>–ì–ª–∞–≤–Ω–∞—è</span>
  </a>
  <a class="bottom-nav__item" href="{{ url_for('profile') }}">
    <span>üë§</span>
    <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
  </a>
</nav>
{% endblock %}
